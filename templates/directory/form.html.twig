{# templates/directory/form.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}TechBoard - {{ is_edit ? 'Modifier' : 'Nouveau' }} contact{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="h4 mb-0">{{ is_edit ? 'Modifier le contact' : 'Nouveau contact' }}</h2>
    <a href="directory.php" class="btn btn-sm btn-outline-secondary">
        <i class="fas fa-arrow-left"></i> Retour
    </a>
</div>

{% if error %}
<div class="alert alert-danger">{{ error }}</div>
{% endif %}

<div class="card border-0 shadow-sm" style="background-color: #fafafa;">
    <div class="card-body p-3">
        <form method="POST">
            <div class="row g-2">
                <div class="col-md-3">
                    <label for="name" class="form-label small fw-bold">Nom *</label>
                    <input type="text" class="form-control form-control-sm" id="name" name="name" value="{{ contact.name ?? '' }}" required>
                </div>
                <div class="col-md-3">
                    <label for="firstname" class="form-label small fw-bold">Prénom *</label>
                    <input type="text" class="form-control form-control-sm" id="firstname" name="firstname" value="{{ contact.firstname ?? '' }}" required>
                </div>
                <div class="col-md-6">
                    <label for="company" class="form-label small fw-bold">Société</label>
                    <input type="text" class="form-control form-control-sm" id="company" name="company" value="{{ contact.company ?? '' }}">
                </div>

                <div class="col-md-6">
                    <label for="contact_type" class="form-label small fw-bold">Type de contact</label>
                    <select class="form-select form-select-sm" id="contact_type" name="contact_type">
                        <option value="internal_staff" {% if (contact.contact_type ?? 'internal_staff') == 'internal_staff' %}selected{% endif %}>Collaborateur interne</option>
                        <option value="vendor" {% if (contact.contact_type ?? '') == 'vendor' %}selected{% endif %}>Fournisseur</option>
                        <option value="contractor" {% if (contact.contact_type ?? '') == 'contractor' %}selected{% endif %}>Prestataire</option>
                        <option value="public_service" {% if (contact.contact_type ?? '') == 'public_service' %}selected{% endif %}>Service public</option>
                    </select>
                </div>

                <div class="col-md-6">
                    <label for="position" class="form-label small fw-bold">Fonction</label>
                    <input type="text" class="form-control form-control-sm" id="position" name="position" value="{{ contact.position ?? '' }}">
                </div>

                <div class="col-md-6">
                    <label for="expertise_area" class="form-label small fw-bold">Domaine d'intervention</label>
                    <input type="text" class="form-control form-control-sm" id="expertise_area" name="expertise_area" value="{{ contact.expertise_area ?? '' }}">
                </div>

                <div class="col-md-6">
                    <label for="phone" class="form-label small fw-bold">Téléphone</label>
                    <input type="text" class="form-control form-control-sm" id="phone" name="phone" value="{{ contact.phone ?? '' }}">
                </div>

                <div class="col-md-6">
                    <label for="email" class="form-label small fw-bold">Email</label>
                    <input type="email" class="form-control form-control-sm" id="email" name="email" value="{{ contact.email ?? '' }}">
                </div>

                <div class="col-md-6">
                </div>

                <div class="col-md-12">
                    <label for="notes" class="form-label small fw-bold">Notes / Remarques</label>
                    <textarea class="form-control form-control-sm" id="notes" name="notes" rows="2">{{ contact.notes ?? '' }}</textarea>
                </div>
            </div>

            <div class="mt-3 pt-2 border-top border-light text-end">
                <a href="directory.php" class="btn btn-sm btn-outline-secondary">Annuler</a>
                <button type="submit" class="btn btn-success btn-sm px-3 ms-1">
                    <i class="fas fa-save"></i> Enregistrer
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}