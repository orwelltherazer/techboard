{# templates/directory/form.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}TechBoard - {{ is_edit ? 'Modifier' : 'Nouveau' }} contact{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>{{ is_edit ? 'Modifier le contact' : 'Nouveau contact' }}</h2>
    <a href="directory.php" class="btn btn-outline-secondary">← Retour</a>
</div>

{% if error %}
<div class="alert alert-danger">{{ error }}</div>
{% endif %}

<form method="POST" class="row g-3">
    <div class="col-md-6">
        <label for="name" class="form-label fw-bold">Nom *</label>
        <input type="text" class="form-control" id="name" name="name" value="{{ contact.name ?? '' }}" required>
    </div>
    
    <div class="col-md-6">
        <label for="company" class="form-label fw-bold">Société</label>
        <input type="text" class="form-control" id="company" name="company" value="{{ contact.company ?? '' }}">
    </div>
    
    <div class="col-md-6">
        <label for="contact_type" class="form-label fw-bold">Type de contact</label>
        <select class="form-select" id="contact_type" name="contact_type">
            <option value="internal_staff" {% if (contact.contact_type ?? 'internal_staff') == 'internal_staff' %}selected{% endif %}>Collaborateur interne</option>
            <option value="vendor" {% if (contact.contact_type ?? '') == 'vendor' %}selected{% endif %}>Fournisseur</option>
            <option value="contractor" {% if (contact.contact_type ?? '') == 'contractor' %}selected{% endif %}>Prestataire</option>
            <option value="public_service" {% if (contact.contact_type ?? '') == 'public_service' %}selected{% endif %}>Service public</option>
        </select>
    </div>
    
    <div class="col-md-6">
        <label for="position" class="form-label fw-bold">Fonction</label>
        <input type="text" class="form-control" id="position" name="position" value="{{ contact.position ?? '' }}">
    </div>
    
    <div class="col-md-6">
        <label for="expertise_area" class="form-label fw-bold">Domaine d'intervention</label>
        <input type="text" class="form-control" id="expertise_area" name="expertise_area" value="{{ contact.expertise_area ?? '' }}">
    </div>
    
    <div class="col-md-6">
        <label for="phone" class="form-label fw-bold">Téléphone</label>
        <input type="text" class="form-control" id="phone" name="phone" value="{{ contact.phone ?? '' }}">
    </div>
    
    <div class="col-md-6">
        <label for="email" class="form-label fw-bold">Email</label>
        <input type="email" class="form-control" id="email" name="email" value="{{ contact.email ?? '' }}">
    </div>
    
    <div class="col-12">
        <label for="address" class="form-label fw-bold">Adresse</label>
        <textarea class="form-control" id="address" name="address" rows="2">{{ contact.address ?? '' }}</textarea>
    </div>
    
    <div class="col-12">
        <label for="notes" class="form-label fw-bold">Notes / Remarques</label>
        <textarea class="form-control" id="notes" name="notes" rows="3">{{ contact.notes ?? '' }}</textarea>
    </div>
    
    <div class="col-12 text-end">
        <button type="submit" class="btn btn-primary">{{ is_edit ? 'Mettre à jour' : 'Ajouter le contact' }}</button>
    </div>
</form>
{% endblock %}